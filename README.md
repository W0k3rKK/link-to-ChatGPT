# æ‰“é€ è‡ªå·±çš„ChatGPTï¼šOpenAI çš„APIæŽ¥å…¥æŠ€å·§
### 2023å¹´3æœˆæ›´æ–°
OpenAI åœ¨3æœˆ1æ—¥çš„æ—¶å€™æ”¾å‡ºäº†ChatGPTçš„æŽ¥å£ï¼Œæ–°çš„æŽ¥å£å¯ä»¥ä½¿ç”¨ GPT-3.5 æ¨¡åž‹ï¼ŒåŒæ—¶æŽ¥å£å‚æ•°æ›´æ–°ä¸ºäº† messages çš„ç»“æž„ï¼Œæ›´ç¬¦åˆå¯¹è¯åœºæ™¯çš„æ¶ˆæ¯æ ¼å¼ï¼Œè€Œä¸”ä»·æ ¼ä¹Ÿæ›´åŠ ä¾¿å®œã€‚
ç”±äºŽå…¶ä»–çš„æŽ¥å£å‚æ•°å˜åŒ–ä¸å¤§ï¼ŒåŒæ—¶è¿”å›žçš„æ¶ˆæ¯æ ¼å¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥åªéœ€è¦å¯¹è¯·æ±‚æ ¼å¼ï¼Œç›´æŽ¥æŒ‰ç…§messagesçš„æ ¼å¼è¿›è¡Œæ•´ç†ä¹‹åŽï¼Œå˜æ›´æŽ¥å£å’Œæ¨¡åž‹ï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„æ›¿æ¢ä¹‹å‰æŽ¥å…¥çš„completionsçš„æŽ¥å£ã€‚
å€¼å¾—æŽ¨è ðŸ‘ðŸ‘ðŸ‘

## ç®€ä»‹
> ðŸ¤–:OpenAI çš„APIæä¾›äº†ä¸€ç³»åˆ—çš„äººå·¥æ™ºèƒ½æ¨¡åž‹ï¼ŒåŒ…æ‹¬ GPT-3ã€GPT-2 å’Œ GPT-1ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…åˆ©ç”¨æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ çš„æŠ€æœ¯å¿«é€Ÿå®žçŽ°æ–‡æœ¬ç†è§£å’Œç”Ÿæˆã€‚OpenAI API æ‹¥æœ‰å¼ºå¤§çš„è‡ªç„¶è¯­è¨€å¤„ç†åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å®žçŽ°å„ç§è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ï¼ŒåŒ…æ‹¬è¯­ä¹‰ç†è§£ã€æ–‡æœ¬ç”Ÿæˆã€æ–‡æœ¬åˆ†ç±»ç­‰.

å¯¹äºŽæ¯ä¸ªæƒ³å°è¯•ä½¿ç”¨OpenAI API å¼€å‘è‡ªå·±çš„ChatGPTçš„å¼€å‘è€…æ¥è¯´ï¼Œå¯èƒ½å¯¹ä¼šé¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼Œéƒ½æ˜¯å¯¹æŽ¥çš„åŒä¸€å¥—çš„APIï¼Œä¸ºä»€ä¹ˆæˆ‘å¾—åˆ°çš„è¾“å‡ºå’Œæƒ³è±¡çš„å®Œå…¨ä¸ä¸€æ ·å‘¢ã€‚

è¿™å…¶ä¸­æœ€ä¸»è¦çš„é—®é¢˜å°±åœ¨äºŽå¯¹äºŽæŽ¥å£çš„ç†è§£ã€‚

## ç†è§£æŽ¥å£
OpenAI APIçš„æ ¸å¿ƒåœ¨äºŽ completions æŽ¥å£ï¼Œç”¨æˆ·æä¾› promptï¼ŒAPIè¿”å›žæ–‡æœ¬completionï¼Œè¿™ä¸€æ¥ä¸€å›žå°±æž„æˆçš„å¯¹äºŽç”¨æˆ·éœ€æ±‚çš„åº”ç­”ã€‚

æ‰€ä»¥ä½œä¸ºå¼€å‘è€…ï¼Œåœ¨å°è¯•çš„æŽ¥å…¥è¯¥æŽ¥å£çš„æ—¶å€™ï¼Œå°±ä¼šé»˜è®¤è®¤ä¸ºå’ŒChatGPTçš„æ•ˆæžœä¸€æ ·ï¼Œç›´æŽ¥å°†èŠå¤©çš„å†…å®¹ä½œä¸ºpromptï¼Œä½†æ˜¯æ²¡è¿‡å¤šä¹…å°±ä¼šå‘çŽ°çš„ï¼Œè¿”å›žçš„å†…å®¹çš„è¶Šå‘æ„Ÿè§‰åˆ°å¥‡æ€ªï¼Œæœ‰æ—¶ä¼šä¸çŸ¥æ‰€äº‘ï¼Œæœ‰æ—¶å€™ä¼šå‡ºçŽ°æ ¼å¼é”™ä¹±ã€‚

è¿™æ˜¯å› ä¸º OpenAI API çš„ completions æŽ¥å£æœ¬èº«æ˜¯ä¸ºäº†æ”¯æŒå¤šç§ç±»åž‹çš„promptï¼Œè€Œä¸ä»…ä»…æ˜¯èŠå¤©æ–‡æœ¬ã€‚ä¸ºäº†èŽ·å¾—æ›´å¥½çš„æ•ˆæžœï¼Œå¼€å‘è€…éœ€è¦æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œè®¾ç½®åˆé€‚çš„promptæ ¼å¼ï¼Œä»¥ä¾¿èŽ·å¾—æ›´å‡†ç¡®çš„ç»“æžœã€‚

## èŠå¤©æ•ˆæžœ
åœ¨OpenAIçš„Example å’Œ Playgroundé‡Œé¢æä¾›äº† Chat æƒ…æ™¯çš„Promptã€‚

![Open AI playground](/src/main/resources/static/images/img01.png)

Open AI playground

å…¶ä¸­æ ¸å¿ƒç‚¹å°±åœ¨äºŽä¸‰ç‚¹ï¼š

- 1.ä½¿ç”¨ä¸€æ®µç®€çŸ­çš„æè¿°è¯´æ˜Žå½“å‰çš„åœºæ™¯ï¼Œå¹¶å¯¹AI assistant èµ‹äºˆä¸€å®šçš„äººæ ¼ç‰¹æ€§è¯´æ˜Ž
- 2.ä½¿ç”¨äº†èŠå¤©å¯¹è¯çš„æ ¼å¼ä½œä¸ºpromptï¼ŒAPIä½œä¸ºæ–‡æœ¬ç”Ÿæˆçš„å·¥å…·ï¼Œä¼šè¿›è¡ŒåŽç»­æ–‡æœ¬çš„ç”Ÿæˆï¼Œå½“promptåˆšå¥½ç»“æŸåˆ°AIï¼šï¼ˆplaygroundä½¿ç”¨ Inject start text ï¼Œåœ¨æäº¤promptä¹‹å‰è‡ªåŠ¨è¡¥å……äº† /n AI:ï¼‰çš„æ—¶å€™ï¼ŒAPIè‡ªç„¶ä¼šä»¥å½“å‰çš„åœºæ™¯è¿›è¡ŒåŽç»­å†…å®¹çš„è¡¥å……
- 3.ä½¿ç”¨stopé¿å…ç”Ÿæˆå†…å®¹è¶…å‡ºèŒƒå›´ã€‚åœ¨èŠå¤©çš„åœºæ™¯ä¸­ï¼Œå¦‚æžœä¸åŠ stopçš„è¯ï¼Œå¯èƒ½é™¤äº†ç”ŸæˆAIçš„å›žç­”ä»¥å¤–ï¼Œè¿˜æœ‰ç»§ç»­ç”ŸæˆHumançš„å†…å®¹ï¼Œè¿™äº›å°±ä¸æ˜¯åœ¨é¢„æœŸèŒƒå›´ä¹‹å†…çš„äº†ã€‚
- 
ç”±æ­¤ï¼Œå¼€å‘è€…åœ¨è‡ªè¡ŒæŽ¥å…¥OpenAI APIçš„æ‰“é€ èŠå¤©æœºå™¨äººæ—¶å€™ï¼Œå°±éœ€è¦æ³¨æ„å°†ç”¨æˆ·çš„èŠå¤©å†…å®¹åŒ…è£…å…¥ promptä¸­ï¼Œæž„å»ºå‡ºå®Œæ•´çš„æ„å›¾æè¿°ï¼Œå¹¶è®¾ç½®å¥½å¯¹åº”çš„stopï¼Œæ‰èƒ½å¾—åˆ°æ›´åŠ æœ‰æ•ˆçš„å›žç­”ã€‚

## ä¸Šä¸‹æ–‡è¿žç»­
å¦å¤–ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„é—®é¢˜å°±æ˜¯ï¼Œä¸ºä»€ä¹ˆæŽ¥å…¥çš„APIå¹¶ä¸åƒChatGPTä¸€æ ·å…·æœ‰ä¸Šä¸‹æ–‡çš„è¿žç»­æ€§çš„ã€‚

è¿™ä¸ªå…³é”®ç‚¹è¿˜æ˜¯åœ¨äºŽå½“å‰çš„APIæ˜¯æ— çŠ¶æ€çš„ï¼Œå°¤å…¶æ˜¯Webåº”ç”¨çš„å¼€å‘è€…å¯¹äºŽæ— çŠ¶æ€åº”è¯¥æ˜¯å†ç†Ÿæ‚‰ä¸è¿‡çš„äº†ã€‚æ— çŠ¶æ€çš„æŽ¥å£è‡ªç„¶æ˜¯æ— æ³•æœ‰å‰åŽçš„å…³è”äº†ï¼Œæ¯ä¸€æ¬¡çš„è°ƒç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚

æ‰€ä»¥æƒ³è¦å®žçŽ°ä¸Šä¸‹æ–‡çš„å…³è”ï¼Œå°±ä¹‹å†…å°½å¯èƒ½çš„ç»™è¶³ä¸Šæ–‡ã€‚è¿™ä¸ªæ„æ€å°±æ˜¯è¯´ï¼Œåœ¨promptä¸­ï¼Œéœ€è¦æŠŠä¹‹å‰çš„èŠå¤©å†…å®¹çš„éƒ½æºå¸¦ä¸Šã€‚å¸¦çš„è¶Šå¤šï¼Œè‡ªç„¶çŸ¥é“çš„è¶Šå¤šï¼Œå…³è”æ€§å°±è¶Šå¼ºã€‚

![ChatGPTçš„ä¼šè¯è¿žç»­æ€§](/src/main/resources/static/images/img02.png)
![ChatGPTçš„ä¼šè¯è¿žç»­æ€§](/src/main/resources/static/images/img03.png)

ChatGPTçš„ä¼šè¯è¿žç»­æ€§

ä½†æ˜¯ä¹Ÿå¹¶ä¸æ˜¯å¯ä»¥æ— é™åˆ¶çš„æºå¸¦ä¸Šæ–‡ã€‚æŽ¥å£ä¸­æœ‰ä¸€ä¸ªmax_tokensçš„å‚æ•°ï¼Œç”¨äºŽæŽ§åˆ¶ç”Ÿæˆcompletionçš„é•¿åº¦ï¼Œè€Œpromptå’Œcompletionçš„æ€»é•¿åº¦ï¼Œå—æ¨¡åž‹æœ€å¤§é•¿åº¦çš„é™åˆ¶ï¼ˆæœ€æ–°çš„text-davinci-003çš„æœ€å¤§é•¿åº¦æ˜¯4096tokenï¼‰ï¼Œtokençš„è®¡ç®—å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„å·¥å…·è¿›è¡Œè¯„ä¼°ã€‚

## å…¶ä»–å‚æ•°
é™¤äº†ä»¥ä¸Šå‚æ•°ä¹‹å¤–çš„ï¼Œå¦å¤–çš„åƒæ˜¯temperatureæŽ§åˆ¶çš„ç”Ÿæˆå†…å®¹çš„éšæœºæ€§ï¼Œfrequency_penaltyå’Œpresence_penaltyæä¾›ç”Ÿæˆå†…å®¹çš„å¤šæ ·æ€§ç­‰ç­‰ï¼Œå¼€å‘è€…å¯ä»¥è¯¦ç»†å‚è€ƒOpenAIçš„å¼€å‘æ–‡æ¡£ï¼Œäº†è§£å‚æ•°çš„è¯¦æƒ…ï¼Œæ ¹æ®å®žé™…çš„åº”ç”¨åœºæ™¯è¿›è¡Œå‚æ•°å¾®è°ƒï¼Œä»Žè€Œæ‰“é€ å±žäºŽè‡ªå·±çš„ChatGPTã€‚

> è½¬è‡ªï¼š[æ‰“é€ è‡ªå·±çš„ChatGPTï¼šOpenAI çš„APIæŽ¥å…¥æŠ€å·§](https://www.cnblogs.com/xbotter/p/how_to_use_openai_api.html)